# MakeFile function     :: MakeFile for compiling v4l2 display test suite for Davinci(DM644x) platform 
# Creation  Date        :: 15-Sep-2008
# Author                :: Prathap.M.S
# Modification Details  :: Modified for -----
# Modification  Date    :: 
# Makefile version      :: 0.10

#Version string for the test suite. Change as required
VERSION_STRING  = "0.10"

#Tool chain path. Change based on product/platform used
TOOL_PREFIX     = /opt/montavista/pro/devkit/arm/v5t_le/bin/arm_v5t_le-
CC              = $(TOOL_PREFIX)gcc 

#Kernel include directory- Change based on your setup/path
KERNEL_INCLUDE_DIR = /home/pratap/REL_LSP_01_30_00_080/montavista/pro/devkit/lsp/ti-davinci/linux-2.6.10_mvl401_LSP_01_30_00_080

#Flags for compilation
CFLAGS          = -g -Wall -O1 -fomit-frame-pointer

#LD flags
LDFLAGS         = -g -static

#Installation directory - Change based on desired path for placing test suite executable
INSTDIR         = ../bin

#Path of header files to be included
INCLUDES        = -I $(KERNEL_INCLUDE_DIR)/include -I ../inc

#List of source files- Update this on adding a new C file to test suite
SOURCES := \
        testcases/st_v4l2_display_stability_test.c\
        testcases/st_v4l2_display_test.c\
        testcases/st_v4l2_display_test_from_file.c\
        testcases/st_v4l2_display_api_test.c\
        interface/st_v4l2_display_interface_dm644x.c\
        parser/st_v4l2_display_common.c\
        parser/st_v4l2_display_parser.c\


#Rules to build
all: 
	$(CC) $(LDFLAGS) -D VERSION_STRING=$(VERSION_STRING) -o v4l2DisplayTests $(INCLUDES) $(SOURCES) 
	mv v4l2DisplayTests $(INSTDIR) 

#Rule to clean
clean:
	rm -f  *.o 
	rm -f  v4l2DisplayTests 
